# =====================================================
# INVOKE CONFIGURATION: cmake-build
# =====================================================
# -- ON WINDOWS:
# run:
#   echo: true
#   pty:  false
#   shell: C:\Windows\System32\cmd.exe
# =====================================================
# MAYBE: tasks: auto_dash_names: false

project:
    name: cmake-build

run:
    echo: true
    pty:  true

clean:
    extra_directories:
      - "build"
      - "dist"
      - "__WORKDIR__"
      - "examples/program_hello/build*"
      - "examples/library_hello/build*"
      - reports

clean_all:
    extra_directories:
      - .hypothesis
      - .pytest_cache

# cmake_build:
cmake_generator: ninja
build_dir_schema: "build.{BUILD_CONFIG}"
build_config_aliases:
    default: debug
    all:
      - qnx_armlev7_Debug
      - qnx_armlev7_Release

build_configs:
    debug:
        # cmake_toolchain: auto
        cmake_defines:
          - CMAKE_BUILD_TYPE: Debug
    Release:
        # cmake_toolchain: auto
        cmake_defines:
          - CMAKE_BUILD_TYPE=Release
    qnx_armlev7_Debug:
        cmake_toolchain: cmake/toolchain/qnx_armlev7.cmake
        cmake_defines:
          - CMAKE_BUILD_TYPE=Debug
    qnx_armlev7_Release:
        cmake_toolchain: cmake/toolchain/qnx_armlev7.cmake
        cmake_defines:
          - CMAKE_BUILD_TYPE: Release

projects:
  - examples/program_hello
  - examples/library_hello

behave_test:
    scopes:
      - features
    args: features

