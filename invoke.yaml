# =====================================================
# INVOKE CONFIGURATION: cmake-build
# =====================================================
# -- ON WINDOWS:
# run:
#   echo: true
#   pty:  false
#   shell: C:\Windows\System32\cmd.exe
# =====================================================
# MAYBE: tasks: auto_dash_names: false

project:
    name: cmake-build

run:
    echo: true
    pty:  true

clean:
    extra_directories:
      - "build"
      - "dist"
      - "examples/program_hello/build*"
      - "examples/library_hello/build*"

clean_all:
    extra_directories:
      - .hypothesis
      - .pytest_cache

cmake:
    generator: ninja
    build_dir_schema: "build.{BUILD_CONFIG}"
    build_config_aliases:
        default: qnx_armlev7_Debug
        all:
          - qnx_armlev7_Debug
          - qnx_armlev7_Release

    build_configs:
        Debug:
            toolchain: auto
            defines:
              - CMAKE_BUILD_TYPE=Debug
        Release:
            toolchain: auto
            defines:
              - CMAKE_BUILD_TYPE=Release
        qnx_armlev7_Debug:
            toolchain: cmake/toolchain/qnx_armlev7.cmake
            defines:
              - CMAKE_BUILD_TYPE=Debug
        qnx_armlev7_Release:
            toolchain: cmake/toolchain/qnx_armlev7.cmake
            defines:
              - CMAKE_BUILD_TYPE=Release

    project_dirs:
      - examples/program_hello
      - examples/library_hello

# -- DISABLED:
# behave_test:
#    scopes:
#      - features
#      - tools/test-features
#      - issue.features
#    args: features tools/test-features issue.features

